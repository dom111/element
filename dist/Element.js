(()=>{var K=(e,n,t)=>{if(!n.has(e))throw TypeError("Cannot "+t)};var P=(e,n,t)=>(K(e,n,"read from private field"),t?t.call(e):n.get(e)),q=(e,n,t)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,t)},S=(e,n,t,a)=>(K(e,n,"write to private field"),a?a.call(e,t):n.set(e,t),t);var o;(function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"})(o||(o={}));var p;(function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"})(p||(p={}));var j=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,W=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,U=new Map([[126,p.Element],[94,p.Start],[36,p.End],[42,p.Any],[33,p.Not],[124,p.Hyphen]]),Q=new Set(["has","not","matches","is","where","host","host-context"]);function D(e){switch(e.type){case o.Adjacent:case o.Child:case o.Descendant:case o.Parent:case o.Sibling:case o.ColumnCombinator:return!0;default:return!1}}var z=new Set(["contains","icontains"]);function V(e,n,t){let a=parseInt(n,16)-65536;return a!==a||t?n:a<0?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)}function l(e){return e.replace(W,V)}function w(e){return e===39||e===34}function G(e){return e===32||e===9||e===10||e===12||e===13}function y(e){let n=[],t=N(n,`${e}`,0);if(t<e.length)throw new Error(`Unmatched selector: ${e.slice(t)}`);return n}function N(e,n,t){let a=[];function h(u){let i=n.slice(t+u).match(j);if(!i)throw new Error(`Expected name, found ${n.slice(t)}`);let[r]=i;return t+=u+r.length,l(r)}function s(u){for(t+=u;t<n.length&&G(n.charCodeAt(t));)t++}function v(){t+=1;let u=t,i=1;for(;i>0&&t<n.length;t++)n.charCodeAt(t)===40&&!c(t)?i++:n.charCodeAt(t)===41&&!c(t)&&i--;if(i)throw new Error("Parenthesis not matched");return l(n.slice(u,t-1))}function c(u){let i=0;for(;n.charCodeAt(--u)===92;)i++;return(i&1)===1}function k(){if(a.length>0&&D(a[a.length-1]))throw new Error("Did not expect successive traversals.")}function E(u){if(a.length>0&&a[a.length-1].type===o.Descendant){a[a.length-1].type=u;return}k(),a.push({type:u})}function M(u,i){a.push({type:o.Attribute,name:u,action:i,value:h(1),namespace:null,ignoreCase:"quirks"})}function O(){if(a.length&&a[a.length-1].type===o.Descendant&&a.pop(),a.length===0)throw new Error("Empty sub-selector");e.push(a)}if(s(0),n.length===t)return t;t:for(;t<n.length;){let u=n.charCodeAt(t);switch(u){case 32:case 9:case 10:case 12:case 13:{(a.length===0||a[0].type!==o.Descendant)&&(k(),a.push({type:o.Descendant})),s(1);break}case 62:{E(o.Child),s(1);break}case 60:{E(o.Parent),s(1);break}case 126:{E(o.Sibling),s(1);break}case 43:{E(o.Adjacent),s(1);break}case 46:{M("class",p.Element);break}case 35:{M("id",p.Equals);break}case 91:{s(1);let i,r=null;n.charCodeAt(t)===124?i=h(1):n.startsWith("*|",t)?(r="*",i=h(2)):(i=h(0),n.charCodeAt(t)===124&&n.charCodeAt(t+1)!==61&&(r=i,i=h(1))),s(0);let f=p.Exists,H=U.get(n.charCodeAt(t));if(H){if(f=H,n.charCodeAt(t+1)!==61)throw new Error("Expected `=`");s(2)}else n.charCodeAt(t)===61&&(f=p.Equals,s(1));let b="",A=null;if(f!=="exists"){if(w(n.charCodeAt(t))){let g=n.charCodeAt(t),d=t+1;for(;d<n.length&&(n.charCodeAt(d)!==g||c(d));)d+=1;if(n.charCodeAt(d)!==g)throw new Error("Attribute value didn't end");b=l(n.slice(t+1,d)),t=d+1}else{let g=t;for(;t<n.length&&(!G(n.charCodeAt(t))&&n.charCodeAt(t)!==93||c(t));)t+=1;b=l(n.slice(g,t))}s(0);let T=n.charCodeAt(t)|32;T===115?(A=!1,s(1)):T===105&&(A=!0,s(1))}if(n.charCodeAt(t)!==93)throw new Error("Attribute selector didn't terminate");t+=1;let F={type:o.Attribute,name:i,action:f,value:b,namespace:r,ignoreCase:A};a.push(F);break}case 58:{if(n.charCodeAt(t+1)===58){a.push({type:o.PseudoElement,name:h(2).toLowerCase(),data:n.charCodeAt(t)===40?v():null});continue}let i=h(1).toLowerCase(),r=null;if(n.charCodeAt(t)===40)if(Q.has(i)){if(w(n.charCodeAt(t+1)))throw new Error(`Pseudo-selector ${i} cannot be quoted`);if(r=[],t=N(r,n,t+1),n.charCodeAt(t)!==41)throw new Error(`Missing closing parenthesis in :${i} (${n})`);t+=1}else{if(r=v(),z.has(i)){let f=r.charCodeAt(0);f===r.charCodeAt(r.length-1)&&w(f)&&(r=r.slice(1,-1))}r=l(r)}a.push({type:o.Pseudo,name:i,data:r});break}case 44:{O(),a=[],s(1);break}default:{if(n.startsWith("/*",t)){let f=n.indexOf("*/",t+2);if(f<0)throw new Error("Comment was not terminated");t=f+2,a.length===0&&s(0);break}let i=null,r;if(u===42)t+=1,r="*";else if(u===124){if(r="",n.charCodeAt(t+1)===124){E(o.ColumnCombinator),s(2);break}}else if(j.test(n.slice(t)))r=h(0);else break t;n.charCodeAt(t)===124&&n.charCodeAt(t+1)!==124&&(i=r,n.charCodeAt(t+1)===42?(r="*",t+=2):r=h(1)),a.push(r==="*"?{type:o.Universal,namespace:i}:{type:o.Tag,name:r,namespace:i})}}}return O(),t}var B=e=>{for(;e.hasChildNodes();)e.firstChild.remove()},J=(e,...n)=>{let[t]=y(e).map(a=>a.reduce((h,s)=>{var v;return h===null&&s.type!=="tag"&&(h=document.createElement("div")),s.type==="tag"?document.createElement(s.name):(s.type==="attribute"&&s.name!=="class"&&h.setAttribute(s.name,(v=s.value)!=null?v:""),s.type==="attribute"&&s.name==="class"&&h.classList.add(s.value),h)},null));return n.forEach(a=>{a instanceof C&&(a=a.element()),t.append(a)}),t},$=(e,n,t,a)=>e.addEventListener(n,t,a),R=(e,n,t,a)=>{n.forEach(h=>$(e,h,t,a))},et=e=>document.createTextNode(e),m,L=class{constructor(n,...t){q(this,m,void 0);S(this,m,J(n,...t))}addClass(...n){this.element().classList.add(...n)}append(...n){n.forEach(t=>{t instanceof L&&(t=t.element()),this.element().append(t)})}element(){return P(this,m)}empty(){B(this.element())}on(n,t,a){$(this.element(),n,t,a)}onEach(n,t,a){R(this.element(),n,t,a)}removeClass(...n){this.element().classList.remove(...n)}},C=L;m=new WeakMap;var at=C;})();
//# sourceMappingURL=Element.js.map
